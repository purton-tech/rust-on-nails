<svg xmlns="http://www.w3.org/2000/svg" width="720" height="420" viewBox="0 0 720 420">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #1f2933; stroke-width: 2; rx: 10; ry: 10; }
      .title { font: 16px sans-serif; fill: #111827; font-weight: 600; }
      .body { font: 14px sans-serif; fill: #111827; }
      .optional { fill: none; stroke: #9ca3af; stroke-width: 2; stroke-dasharray: 8 6; }
      .label { font: 14px sans-serif; fill: #4b5563; font-style: italic; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#1f2933"/>
    </marker>
  </defs>
  <rect x="40" y="40" width="150" height="90" class="box"/>
  <text x="115" y="70" class="title" text-anchor="middle">Ingress</text>
  <text x="115" y="100" class="body" text-anchor="middle">nginx</text>

  <rect x="250" y="40" width="180" height="120" class="box"/>
  <text x="340" y="70" class="title" text-anchor="middle">OAuth2 Proxy</text>
  <text x="340" y="100" class="body" text-anchor="middle">OIDC sessions</text>
  <text x="340" y="120" class="body" text-anchor="middle">Authz headers</text>

  <rect x="500" y="40" width="180" height="120" class="box"/>
  <text x="590" y="70" class="title" text-anchor="middle">nails-app</text>
  <text x="590" y="100" class="body" text-anchor="middle">UI + APIs</text>
  <text x="590" y="120" class="body" text-anchor="middle">Rust on Nails</text>

  <line x1="190" y1="85" x2="250" y2="85" stroke="#1f2933" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="430" y1="85" x2="500" y2="85" stroke="#1f2933" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="220" y="70" class="label" text-anchor="middle">HTTP</text>
  <text x="465" y="70" class="label" text-anchor="middle">Authenticated</text>

  <rect x="250" y="200" width="180" height="110" class="box"/>
  <text x="340" y="230" class="title" text-anchor="middle">Keycloak</text>
  <text x="340" y="260" class="body" text-anchor="middle">OIDC provider</text>

  <rect x="80" y="220" width="160" height="90" class="box"/>
  <text x="160" y="250" class="title" text-anchor="middle">Application DB</text>
  <text x="160" y="275" class="body" text-anchor="middle">PostgreSQL</text>

  <rect x="480" y="220" width="160" height="90" class="box"/>
  <text x="560" y="250" class="title" text-anchor="middle">Keycloak DB</text>
  <text x="560" y="275" class="body" text-anchor="middle">PostgreSQL</text>

  <line x1="430" y1="120" x2="340" y2="200" stroke="#1f2933" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="380" y="175" class="label" text-anchor="middle">OIDC</text>

  <line x1="590" y1="160" x2="160" y2="220" stroke="#1f2933" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="320" y="190" class="label" text-anchor="middle">SQL</text>

  <line x1="340" y1="310" x2="560" y2="265" stroke="#1f2933" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="450" y="292" class="label" text-anchor="middle">Credentials</text>

  <rect x="60" y="320" width="600" height="80" class="optional"/>
  <text x="360" y="345" class="title" text-anchor="middle">Optional Add-ons</text>
  <text x="360" y="370" class="body" text-anchor="middle">pgadmin • grafana • llm-api • mailhog</text>
</svg>
